{"version":3,"sources":["webpack:///./node_modules/@babel/runtime-corejs2/core-js/date/now.js","webpack:///./node_modules/core-js/library/modules/es6.date.now.js","webpack:///./src/assets/whistle.wav","webpack:///./src/views/Run.vue?7380","webpack:///./node_modules/worker-timers-broker/build/es2018/guards/call-notification.js","webpack:///./node_modules/worker-timers-broker/build/es2018/guards/clear-response.js","webpack:///./node_modules/worker-timers-broker/build/es2018/module.js","webpack:///./node_modules/worker-timers/build/es2018/worker/worker.js","webpack:///./node_modules/worker-timers/build/es2018/module.js","webpack:///src/views/Run.vue","webpack:///./src/views/Run.vue?6eb2","webpack:///./src/views/Run.vue","webpack:///./node_modules/fast-unique-numbers/build/es5/bundle.js","webpack:///./src/assets/beep.wav","webpack:///./src/views/Run.vue?f5fa","webpack:///./node_modules/core-js/library/fn/date/now.js"],"names":["module","exports","__webpack_require__","$export","S","now","Date","getTime","p","render","_vm","this","_h","$createElement","_c","_self","staticClass","style","backgroundColor","currentBlockColor","_v","_s","sets","stringifyTimer","currentTimer","currentBlockRepetitionsLeft","attrs","currentTimerIndex","totalTimerCount","totalSequence","currentBlockIndex","timers","length","directives","name","rawName","value","timerIsRunning","expression","on","onClick","restartTimer","stopLoop","runLoop","staticRenderFns","isCallNotification","message","undefined","method","isClearResponse","error","id","load","url","scheduledIntervalFunctions","Map","scheduledTimeoutFunctions","unrespondedRequests","worker","Worker","addEventListener","data","params","timerId","timerType","idOrFunc","get","timerIdAndTimerType","Error","delete","clearInterval","Object","bundle","set","postMessage","clearTimeout","setInterval","func","delay","performance","setTimeout","worker_worker","blob","Blob","type","module_url","URL","createObjectURL","workerTimers","module_clearInterval","module_clearTimeout","module_setInterval","module_setTimeout","revokeObjectURL","console","log","es2018_module_namespaceObject","Runvue_type_script_lang_js_","audioWhistle","Audio","audioBeep","totalTimeLeft","timeout","components","AppTitlePage","e","then","bind","AppBlockProgressBar","AppButtonPause","AppButtonPlay","AppButtonReset","computed","$store","getters","helpers","colorIndex","created","setupTimer","mounted","beforeDestroy","methods","_this","interval","expected","now_default","step","timeDrift","Math","max","decrementTotalTime","decrementCurrentTimer","totalTime","timerBlocks","repetitions","newTimerObject","setCurrentTimer","timerObject","play","switchToNextTimer","m","s","getCurrentTimerFromSequnece","areMoreRepetitionsLeft","startNextCurrentBlockRepetition","isLastTimerBlock","startNextSet","finishSequence","moveToNextBlock","updateTimer","timer","views_Runvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","global","factory","LAST_NUMBER_WEAK_MAP","WeakMap","MAX_SAFE_INTEGER","Number","cache","collection","nextNumber","generateUniqueNumber","lastNumber","size","has","floor","random","addUniqueNumber","number","add","defineProperty","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Run_vue_vue_type_style_index_0_id_30c64744_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Run_vue_vue_type_style_index_0_id_30c64744_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/run.91d20233.js","sourcesContent":["module.exports = require(\"core-js/library/fn/date/now\");","// 20.3.3.1 / 15.9.4.4 Date.now()\nvar $export = require('./_export');\n\n$export($export.S, 'Date', { now: function () { return new Date().getTime(); } });\n","module.exports = __webpack_public_path__ + \"media/whistle.c279d845.wav\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",style:({ backgroundColor: _vm.currentBlockColor })},[_c('div',[_vm._v(\"SETS: \"+_vm._s(_vm.sets)+\"x\")]),_c('div',{staticClass:\"container__timer\"},[_vm._v(_vm._s(_vm.stringifyTimer(_vm.currentTimer)))]),_c('div',[_vm._v(_vm._s(_vm.currentBlockRepetitionsLeft)+\"x\")]),_c('AppBlockProgressBar',{attrs:{\"currentTimerIndex\":_vm.currentTimerIndex + 1,\"totalTimerCount\":_vm.totalSequence[_vm.currentBlockIndex].timers.length}}),_c('AppButtonReset',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.timerIsRunning),expression:\"!timerIsRunning\"}],staticClass:\"container__reset\",on:{\"onClick\":_vm.restartTimer}}),_c('AppButtonPause',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.timerIsRunning),expression:\"timerIsRunning\"}],staticClass:\"container__playPause\",on:{\"onClick\":_vm.stopLoop}}),_c('AppButtonPlay',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.timerIsRunning),expression:\"!timerIsRunning\"}],staticClass:\"container__playPause\",on:{\"onClick\":_vm.runLoop}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const isCallNotification = (message) => {\n    return (message.method !== undefined && message.method === 'call');\n};\n//# sourceMappingURL=/build/es2018/guards/call-notification.js.map","export const isClearResponse = (message) => {\n    return (message.error === null && typeof message.id === 'number');\n};\n//# sourceMappingURL=/build/es2018/guards/clear-response.js.map","import { generateUniqueNumber } from 'fast-unique-numbers';\nimport { isCallNotification } from './guards/call-notification';\nimport { isClearResponse } from './guards/clear-response';\nexport const load = (url) => {\n    const scheduledIntervalFunctions = new Map();\n    const scheduledTimeoutFunctions = new Map();\n    const unrespondedRequests = new Map();\n    const worker = new Worker(url);\n    worker.addEventListener('message', ({ data }) => {\n        if (isCallNotification(data)) {\n            const { params: { timerId, timerType } } = data;\n            if (timerType === 'interval') {\n                const idOrFunc = scheduledIntervalFunctions.get(timerId);\n                if (typeof idOrFunc === 'number') {\n                    const timerIdAndTimerType = unrespondedRequests.get(idOrFunc);\n                    if (timerIdAndTimerType === undefined\n                        || timerIdAndTimerType.timerId !== timerId\n                        || timerIdAndTimerType.timerType !== timerType) {\n                        throw new Error('The timer is in an undefined state.');\n                    }\n                }\n                else if (typeof idOrFunc !== 'undefined') {\n                    idOrFunc();\n                }\n                else {\n                    throw new Error('The timer is in an undefined state.');\n                }\n            }\n            else if (timerType === 'timeout') {\n                const idOrFunc = scheduledTimeoutFunctions.get(timerId);\n                if (typeof idOrFunc === 'number') {\n                    const timerIdAndTimerType = unrespondedRequests.get(idOrFunc);\n                    if (timerIdAndTimerType === undefined\n                        || timerIdAndTimerType.timerId !== timerId\n                        || timerIdAndTimerType.timerType !== timerType) {\n                        throw new Error('The timer is in an undefined state.');\n                    }\n                }\n                else if (typeof idOrFunc !== 'undefined') {\n                    idOrFunc();\n                    // A timeout can be savely deleted because it is only called once.\n                    scheduledTimeoutFunctions.delete(timerId);\n                }\n                else {\n                    throw new Error('The timer is in an undefined state.');\n                }\n            }\n        }\n        else if (isClearResponse(data)) {\n            const { id } = data;\n            const timerIdAndTimerType = unrespondedRequests.get(id);\n            if (timerIdAndTimerType === undefined) {\n                throw new Error('The timer is in an undefined state.');\n            }\n            else {\n                const { timerId, timerType } = timerIdAndTimerType;\n                unrespondedRequests.delete(id);\n                if (timerType === 'interval') {\n                    scheduledIntervalFunctions.delete(timerId);\n                }\n                else {\n                    scheduledTimeoutFunctions.delete(timerId);\n                }\n            }\n        }\n        else {\n            const { error: { message } } = data;\n            throw new Error(message);\n        }\n    });\n    const clearInterval = (timerId) => {\n        const id = generateUniqueNumber(unrespondedRequests);\n        unrespondedRequests.set(id, { timerId, timerType: 'interval' });\n        scheduledIntervalFunctions.set(timerId, id);\n        worker.postMessage({\n            id,\n            method: 'clear',\n            params: { timerId, timerType: 'interval' }\n        });\n    };\n    const clearTimeout = (timerId) => {\n        const id = generateUniqueNumber(unrespondedRequests);\n        unrespondedRequests.set(id, { timerId, timerType: 'timeout' });\n        scheduledTimeoutFunctions.set(timerId, id);\n        worker.postMessage({\n            id,\n            method: 'clear',\n            params: { timerId, timerType: 'timeout' }\n        });\n    };\n    const setInterval = (func, delay) => {\n        const timerId = generateUniqueNumber(scheduledIntervalFunctions);\n        scheduledIntervalFunctions.set(timerId, () => {\n            func();\n            // Doublecheck if the interval should still be rescheduled because it could have been cleared inside of func().\n            if (typeof scheduledIntervalFunctions.get(timerId) === 'function') {\n                worker.postMessage({\n                    id: null,\n                    method: 'set',\n                    params: {\n                        delay,\n                        now: performance.now(),\n                        timerId,\n                        timerType: 'interval'\n                    }\n                });\n            }\n        });\n        worker.postMessage({\n            id: null,\n            method: 'set',\n            params: {\n                delay,\n                now: performance.now(),\n                timerId,\n                timerType: 'interval'\n            }\n        });\n        return timerId;\n    };\n    const setTimeout = (func, delay) => {\n        const timerId = generateUniqueNumber(scheduledTimeoutFunctions);\n        scheduledTimeoutFunctions.set(timerId, func);\n        worker.postMessage({\n            id: null,\n            method: 'set',\n            params: {\n                delay,\n                now: performance.now(),\n                timerId,\n                timerType: 'timeout'\n            }\n        });\n        return timerId;\n    };\n    return {\n        clearInterval,\n        clearTimeout,\n        setInterval,\n        setTimeout\n    };\n};\n//# sourceMappingURL=/build/es2018/module.js.map","// tslint:disable-next-line:max-line-length\nexport const worker = `!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";r.r(t);const n=new Map,o=new Map,i=(e,t)=>{let r,n;if(\"performance\"in self){const o=performance.now();r=o,n=e-Math.max(0,o-t)}else r=Date.now(),n=e;return{expected:r+n,remainingDelay:n}},s=(e,t,r,n)=>{const o=\"performance\"in self?performance.now():Date.now();o>r?postMessage({id:null,method:\"call\",params:{timerId:t,timerType:n}}):e.set(t,setTimeout(s,r-o,e,t,r,n))};addEventListener(\"message\",e=>{let t=e.data;try{if(\"clear\"===t.method){const e=t.id,r=t.params,i=r.timerId,s=r.timerType;if(\"interval\"===s)(e=>{const t=n.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id \"'.concat(e,'\".'));clearTimeout(t),n.delete(e)})(i),postMessage({error:null,id:e});else{if(\"timeout\"!==s)throw new Error('The given type \"'.concat(s,'\" is not supported'));(e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id \"'.concat(e,'\".'));clearTimeout(t),o.delete(e)})(i),postMessage({error:null,id:e})}}else{if(\"set\"!==t.method)throw new Error('The given method \"'.concat(t.method,'\" is not supported'));{const e=t.params,r=e.delay,a=e.now,l=e.timerId,c=e.timerType;if(\"interval\"===c)((e,t,r)=>{const o=i(e,r),a=o.expected,l=o.remainingDelay;n.set(t,setTimeout(s,l,n,t,a,\"interval\"))})(r,l,a);else{if(\"timeout\"!==c)throw new Error('The given type \"'.concat(c,'\" is not supported'));((e,t,r)=>{const n=i(e,r),a=n.expected,l=n.remainingDelay;o.set(t,setTimeout(s,l,o,t,a,\"timeout\"))})(r,l,a)}}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}})}]);`;\n//# sourceMappingURL=/build/es2018/worker/worker.js.map","import { load } from 'worker-timers-broker';\nimport { worker } from './worker/worker';\nconst blob = new Blob([worker], { type: 'application/javascript; charset=utf-8' });\nconst url = URL.createObjectURL(blob);\nconst workerTimers = load(url);\nexport const clearInterval = workerTimers.clearInterval;\nexport const clearTimeout = workerTimers.clearTimeout;\nexport const setInterval = workerTimers.setInterval;\nexport const setTimeout = workerTimers.setTimeout;\nURL.revokeObjectURL(url);\n//# sourceMappingURL=/build/es2018/module.js.map","<template>\n  <div class=\"container\" :style=\"{ backgroundColor: currentBlockColor }\">\n    <div>SETS: {{ sets }}x</div>\n    <div class=\"container__timer\">{{ stringifyTimer(currentTimer) }}</div>\n    <div>{{ currentBlockRepetitionsLeft }}x</div>\n    <AppBlockProgressBar\n      :currentTimerIndex=\"currentTimerIndex + 1\"\n      :totalTimerCount=\"totalSequence[currentBlockIndex].timers.length\"\n    />\n    <AppButtonReset\n      class=\"container__reset\"\n      v-show=\"!timerIsRunning\"\n      @onClick=\"restartTimer\"\n    />\n    <AppButtonPause\n      class=\"container__playPause\"\n      v-show=\"timerIsRunning\"\n      @onClick=\"stopLoop\"\n    />\n    <AppButtonPlay\n      class=\"container__playPause\"\n      v-show=\"!timerIsRunning\"\n      @onClick=\"runLoop\"\n    />\n  </div>\n</template>\n\n<script>\nimport * as workerTimers from 'worker-timers';\nconsole.log('TCL: workerTimers', workerTimers)\nimport { clearInterval, clearTimeout, setTimeout } from 'timers'\nimport {\n  stringifyTimerObject,\n  cloneObject,\n  setAndReturnInterval,\n  decrementTimerObject,\n  timerIsFinished,\n  returnBlockColorByIndex\n} from '../utils/helpers'\n\nexport default {\n  name: 'Run',\n  data () {\n    return {\n      audioWhistle: new Audio(require('../assets/whistle.wav')),\n      audioBeep: new Audio(require('../assets/beep.wav')),\n      totalSequence: null,\n      currentBlockIndex: 0,\n      currentTimerIndex: 0,\n      currentBlockRepetitionsLeft: null, // needs some other mechanism probably\n      timerIsRunning: false,\n      currentTimer: null,\n      totalTimeLeft: null,\n      sets: null,\n      timeout: null\n    }\n  },\n  components: {\n    AppTitlePage: () => import('../components/AppTitlePage'),\n    AppBlockProgressBar: () => import('../components/AppBlockProgressBar'),\n    AppButtonPause: () => import('../components/AppButtonPause'),\n    AppButtonPlay: () => import('../components/AppButtonPlay'),\n    AppButtonReset: () => import('../components/AppButtonReset')\n  },\n  computed: {\n    totalTimerCount () {\n      return this.$store.getters.totalTimerCount\n    },\n    currentBlockColor () {\n      return returnBlockColorByIndex(this.totalSequence[this.currentBlockIndex].colorIndex)\n    }\n  },\n  created () {\n    this.setupTimer()\n  },\n  mounted () {\n    this.runLoop()\n  },\n  beforeDestroy () {\n    this.stopLoop()\n  },\n  methods: {\n    runLoop () {\n      this.timerIsRunning = true\n\n      const interval = 1000\n      let expected = Date.now() + interval\n\n      const step = () => {\n        const timeDrift = Date.now() - expected\n\n        if (this.timerIsRunning) {\n          expected += interval\n          this.timeout = workerTimers.setTimeout(step, Math.max(0, interval - timeDrift))\n          this.decrementTotalTime()\n          this.decrementCurrentTimer()\n        }\n      }\n\n      this.timeout = workerTimers.setTimeout(step, interval)\n    },\n    stopLoop () {\n      workerTimers.clearTimeout(this.timeout)\n      this.timerIsRunning = false\n    },\n    restartTimer () {\n      this.setupTimer()\n      this.runLoop()\n    },\n    setupTimer () {\n      this.currentBlockIndex = 0\n      this.currentTimerIndex = 0\n      this.totalTimeLeft = this.$store.getters.totalTime\n      this.totalSequence = this.$store.getters.timerBlocks\n      this.currentTimer = cloneObject(this.totalSequence[this.currentBlockIndex].timers[this.currentTimerIndex])\n      this.currentBlockRepetitionsLeft = this.totalSequence[this.currentBlockIndex].repetitions\n      this.sets = this.$store.getters.sets\n    },\n    decrementTotalTime () {\n      this.totalTimeLeft = decrementTimerObject(this.totalTimeLeft)\n    },\n    decrementCurrentTimer () {\n      const newTimerObject = decrementTimerObject(this.currentTimer)\n\n      this.setCurrentTimer(newTimerObject)\n    },\n    setCurrentTimer (timerObject) {\n      if (timerIsFinished(timerObject)) {\n        this.audioWhistle.play()\n        this.switchToNextTimer()\n      } else {\n        if (timerObject.m === 0 && timerObject.s < 4) {\n          this.audioBeep.play()\n        }\n        this.currentTimer = timerObject\n      }\n    },\n    switchToNextTimer () {\n      this.currentTimerIndex++\n      this.currentTimer = this.getCurrentTimerFromSequnece()\n\n      if (this.currentTimer === undefined) {\n        if (this.areMoreRepetitionsLeft()) {\n          this.startNextCurrentBlockRepetition()\n        } else {\n          if (this.isLastTimerBlock()) {\n            if (this.sets > 1) {\n              this.startNextSet()\n            } else {\n              this.finishSequence()\n            }\n          } else {\n            this.moveToNextBlock()\n          }\n        }\n      }\n    },\n    startNextSet () {\n      this.sets--\n      this.currentBlockIndex = 0\n      this.currentTimerIndex = 0\n      this.currentTimer = this.getCurrentTimerFromSequnece()\n      this.currentBlockRepetitionsLeft = this.totalSequence[this.currentBlockIndex].repetitions\n    },\n    areMoreRepetitionsLeft () {\n      return this.currentBlockRepetitionsLeft > 1\n    },\n    startNextCurrentBlockRepetition () {\n      this.currentBlockRepetitionsLeft--\n      this.currentTimerIndex = 0\n      this.currentTimer = this.getCurrentTimerFromSequnece()\n    },\n    moveToNextBlock () {\n      this.currentBlockIndex++\n      this.currentTimerIndex = 0\n      this.currentTimer = this.getCurrentTimerFromSequnece()\n      this.currentBlockRepetitionsLeft = this.totalSequence[this.currentBlockIndex].repetitions\n    },\n    getCurrentTimerFromSequnece () {\n      return this.totalSequence[this.currentBlockIndex].timers[this.currentTimerIndex]\n    },\n    isLastTimerBlock () {\n      return this.currentBlockIndex >= this.totalSequence.length - 1\n    },\n    finishSequence () {\n      this.totalTimeLeft = { m: 0, s: 0 }\n      this.currentTimer = { m: 0, s: 0 }\n      this.currentTimerIndex = 0\n      this.currentBlockIndex = 0\n      this.timerIsRunning = false\n    },\n    updateTimer (timerObject) {\n      this.timer = cloneObject(timerObject)\n    },\n    stringifyTimer (timerObject) {\n      return stringifyTimerObject(timerObject)\n    }\n    // renderButtonTitle () {\n    //   return this.timerIsRunning ? 'PAUSE' : 'START'\n    // },\n    // renderTimerTitle (index) {\n    //   if (index === 0) {\n    //     return 'PREPERATION'\n    //   }\n    //   if (index === this.totalSequence.length - 1) {\n    //     return 'COOLDOWN'\n    //   }\n\n    //   return `CUSTOM TIMER ${index}`\n    // }\n    // startOrPauseTimer () {\n    //   this.timerIsRunning ? this.stopInterval() : this.startInterval()\n    // },\n    // restartTimer () {\n    //   if (this.timerIsRunning) {\n    //     this.stopInterval()\n    //   }\n\n    //   this.updateTimer(this.initialTotalTime)\n    //   this.startInterval()\n    // }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../scss/variables';\n\n.container {\n  background-color: $black;\n  width: 100%;\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px 0;\n\n  &__timer {\n    font-size: 9rem;\n    margin: 40px 0;\n  }\n\n  &__reset {\n    position: absolute;\n    bottom: 10px;\n    left: 10px;\n  }\n\n  &__playPause {\n    position: absolute;\n    bottom: 10px;\n    right: 10px;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Run.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Run.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Run.vue?vue&type=template&id=30c64744&scoped=true&\"\nimport script from \"./Run.vue?vue&type=script&lang=js&\"\nexport * from \"./Run.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Run.vue?vue&type=style&index=0&id=30c64744&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30c64744\",\n  null\n  \n)\n\ncomponent.options.__file = \"Run.vue\"\nexport default component.exports","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = global || self, factory(global.fastUniqueNumbers = {}));\n}(this, function (exports) { 'use strict';\n\n    var LAST_NUMBER_WEAK_MAP = new WeakMap();\n    /*\n     * The value of the constant Number.MAX_SAFE_INTEGER equals (2 ** 53 - 1) but it\n     * is fairly new.\n     */\n\n    var MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER === undefined ? 9007199254740991 : Number.MAX_SAFE_INTEGER;\n\n    var cache = function cache(collection, nextNumber) {\n      LAST_NUMBER_WEAK_MAP.set(collection, nextNumber);\n      return nextNumber;\n    };\n\n    var generateUniqueNumber = function generateUniqueNumber(collection) {\n      var lastNumber = LAST_NUMBER_WEAK_MAP.get(collection);\n      /*\n       * Let's try the cheapest algorithm first. It might fail to produce a new\n       * number, but it is so cheap that it is okay to take the risk. Just\n       * increase the last number by one or reset it to 0 if we reached the upper\n       * bound of SMIs (which stands for small integers). When the last number is\n       * unknown it is assumed that the collection contains zero based consecutive\n       * numbers.\n       */\n\n      var nextNumber = lastNumber === undefined ? collection.size : lastNumber > 2147483648 ? 0 : lastNumber + 1;\n\n      if (!collection.has(nextNumber)) {\n        return cache(collection, nextNumber);\n      }\n      /*\n       * If there are less than half of 2 ** 31 numbers stored in the collection,\n       * the chance to generate a new random number in the range from 0 to 2 ** 31\n       * is at least 50%. It's benifitial to use only SMIs because they perform\n       * much better in any environment based on V8.\n       */\n\n\n      if (collection.size < 1073741824) {\n        while (collection.has(nextNumber)) {\n          nextNumber = Math.floor(Math.random() * 2147483648);\n        }\n\n        return cache(collection, nextNumber);\n      } // Quickly check if there is a theoretical chance to generate a new number.\n\n\n      if (collection.size > MAX_SAFE_INTEGER) {\n        throw new Error('Congratulations, you created a collection of unique numbers which uses all available integers!');\n      } // Otherwise use the full scale of safely usable integers.\n\n\n      while (collection.has(nextNumber)) {\n        nextNumber = Math.floor(Math.random() * MAX_SAFE_INTEGER);\n      }\n\n      return cache(collection, nextNumber);\n    };\n\n    var addUniqueNumber = function addUniqueNumber(set) {\n      var number = generateUniqueNumber(set);\n      set.add(number);\n      return number;\n    };\n\n    exports.addUniqueNumber = addUniqueNumber;\n    exports.generateUniqueNumber = generateUniqueNumber;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","module.exports = __webpack_public_path__ + \"media/beep.219f187e.wav\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Run.vue?vue&type=style&index=0&id=30c64744&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Run.vue?vue&type=style&index=0&id=30c64744&lang=scss&scoped=true&\"","require('../../modules/es6.date.now');\nmodule.exports = require('../../modules/_core').Date.now;\n"],"sourceRoot":""}